<a href="https://apparence.io">
  <img
    src="https://firebasestorage.googleapis.com/v0/b/unprocessedsns.firebasestorage.app/o/photo_2025-02-24_04-15-41.jpg?alt=media&token=1514af97-3d35-4cff-ac27-d84095441241"
    width="100%"
  />
</a>
<div style="margin-top:40px">
 
  <img
    src="https://firebasestorage.googleapis.com/v0/b/unprocessedsns.firebasestorage.app/o/features.png?alt=media&token=491ddfb6-310c-4afd-9576-70144af725e8"
    width="100%"
    style="margin-top:32px"
  />
</div>



<br>
# CamerAwesome

<div>
    <a href="https://github.com/Solido/awesome-flutter">
        <img alt="Awesome Flutter" src="https://img.shields.io/badge/Awesome-Flutter-blue.svg?longCache=true&style=for-the-badge" />
    </a>
    <a href="https://github.com/Apparence-io/camera_awesome">
        <img src="https://img.shields.io/github/stars/Apparence-io/camera_awesome.svg?style=for-the-badge&logo=github&colorB=green&label=Stars" alt="Star on Github">
    </a>
    <a href="https://pub.dev/packages/camerawesome">
        <img src="https://img.shields.io/pub/v/camerawesome.svg?style=for-the-badge&label=Pub" alt="Star on Github">
    </a>
</div>



ğŸ“¸ è‡ªåˆ†ã®ã‚¢ãƒ—ãƒªã«ã‚«ãƒ¡ãƒ©ä½“é¨“ã‚’çµ„ã¿è¾¼ã‚€ã“ã¨ã¯ã€ãã‚Œã»ã©é›£ã—ã„ã“ã¨ã§ã¯ãªã„ã¯ãšã ã€‚
<br> ç´ æ™´ã‚‰ã—ã„Android / iOSã‚«ãƒ¡ãƒ©ä½“é¨“ã‚’çµ±åˆã™ã‚‹ãŸã‚ã®flutterãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã€‚<br>

<br>
ã“ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã¯ã€ã‚¢ãƒ—ãƒªå†…ã§ä½¿ç”¨ã§ãã‚‹å®Œå…¨ã«ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºå¯èƒ½ãªã‚«ãƒ¡ãƒ©ä½“é¨“ã‚’æä¾›ã—ã¾ã™ã€‚<br>
ç§ãŸã¡ã®ç´ æ™´ã‚‰ã—ã„çµ„ã¿è¾¼ã¿ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ã‚¤ã‚¹ã‚’ä½¿ç”¨ã™ã‚‹ã‹ã€ã¾ãŸã¯ã‚ãªãŸãŒæœ›ã‚€ã‚ˆã†ã«ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã—ã¾ã™ã€‚

---



## ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã‚¬ã‚¤ãƒ‰

ãƒãƒ¼ã‚¸ãƒ§ãƒ³1.x.xã‹ã‚‰2.x.xã¸ç§»è¡Œã™ã‚‹å ´åˆã¯
[ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã‚¬ã‚¤ãƒ‰]

## ãƒã‚¤ãƒ†ã‚£ãƒ–ã®ç‰¹å¾´

ã“ã“ã§ã¯ã€cameraAwesomeãŒãƒ•ãƒ©ãƒƒã‚¿ãƒ¼å´ã«æä¾›ã™ã‚‹ã™ã¹ã¦ã®ãƒã‚¤ãƒ†ã‚£ãƒ–æ©Ÿèƒ½ã‚’ç´¹ä»‹ã™ã‚‹ã€‚

| Features                                 | Android | iOS |
| :--------------------------------------- | :-----: | :-: |
| ğŸ”– Ask permissions                       |   âœ…    | âœ…  |
| ğŸ¥ Record video                          |   âœ…    | âœ…  |
| ğŸ“¹ Multi camera (ğŸš§ BETA)                |   âœ…    | âœ…  |
| ğŸ”ˆ Enable/disable audio                  |   âœ…    | âœ…  |
| ğŸ Take photos                            |   âœ…    | âœ…  |
| ğŸŒ† Photo live filters                    |   âœ…    | âœ…  |
| ğŸŒ¤ Exposure level                         |   âœ…    | âœ…  |
| ğŸ“¡ Broadcast live image stream           |   âœ…    | âœ…  |
| ğŸ§ª Image analysis (barcode scan & more.) |   âœ…    | âœ…  |
| ğŸ‘ Zoom                                   |   âœ…    | âœ…  |
| ğŸ“¸ Device flash support                  |   âœ…    | âœ…  |
| âŒ›ï¸ Auto focus                            |   âœ…    | âœ…  |
| ğŸ“² Live switching camera                 |   âœ…    | âœ…  |
| ğŸ˜µâ€ğŸ’« Camera rotation stream              |   âœ…    | âœ…  |
| ğŸ¤ Background auto stop                  |   âœ…    | âœ…  |
| ğŸ”€ Sensor type switching                 |   â›”ï¸    | âœ…  |
| ğŸª Enable/disable front camera mirroring |   âœ…    | âœ…  |

---

## ğŸ“–&nbsp; ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã¨ä½¿ç”¨æ–¹æ³•

### Add the package in your `pubspec.yaml`

```yaml
dependencies:
  camerawesome: ^2.0.0-dev.1
  ...
```

### ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ å›ºæœ‰ã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—

- **iOS**

Add these on `ios/Runner/Info.plist`:

```xml
<key>NSCameraUsageDescription</key>
<string>Your own description</string>

<key>NSMicrophoneUsageDescription</key>
<string>To enable microphone access when recording video</string>

<key>NSLocationWhenInUseUsageDescription</key>
<string>To enable GPS location access for Exif data</string>
```

- **Android**

Change the minimum SDK version to 21 (or higher) in `android/app/build.gradle`:

```
minSdkVersion 21
```


> `WRITE_EXTERNAL_STORAGE` is not included in the plugin starting with version
> 1.4.0.

If you want to record videos with audio, add this permission to your
`AndroidManifest.xml`:

```xml
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
        package="com.example.yourpackage">
  <uses-permission android:name="android.permission.RECORD_AUDIO" />

  <!-- Other declarations -->
</manifest>
```

You may also want to save location of your pictures in exif metadata. In this
case, add below permissions:

```xml
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
  package="com.example.yourpackage">
  <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
  <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />

  <!-- Other declarations -->
</manifest>
```

<details>
<summary>âš ï¸ Overriding Android dependencies</summary>

Some of the dependencies used by CamerAwesome can be overriden if you have a
conflict. Change these variables to define which version you want to use:

```gradle
buildscript {
  ext.kotlin_version = '1.7.10'
  ext {
    // You can override these variables
    compileSdkVersion = 33
    minSdkVersion = 24 // 21 minimum
    playServicesLocationVersion = "20.0.0"
    exifInterfaceVersion = "1.3.4"
  }
  // ...
}
```

Only change these variables if you are sure of what you are doing.

For example, setting the Play Services Location version might help you when you
have conflicts with other plugins. The below line shows an example of these
conflicts:

```
java.lang.IncompatibleClassChangeError: Found interface com.google.android.gms.location.ActivityRecognitionClient, but class was expected
```

</details>

### Flutterã‚¢ãƒ—ãƒªã«ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ã‚¤ãƒ³ãƒãƒ¼ãƒˆã™ã‚‹

```dart
import 'package:camerawesome/camerawesome_plugin.dart';
```

---

## ğŸ‘Œ ç´ æ™´ã‚‰ã—ã„å†…è”µã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹

ç§ãŸã¡ã®ãƒ“ãƒ«ãƒ€ãƒ¼ã‚’ã”åˆ©ç”¨ãã ã•ã„ã€‚ <br> ã‚¢ãƒ—ãƒªå†…ã§å®Œå…¨ãªã‚«ãƒ¡ãƒ©ä½“é¨“ã‚’å®Ÿç¾ã™ã‚‹ãŸã‚ã«å¿…è¦ãªã‚‚ã®ã¯ã“ã‚Œã ã‘ã§ã™ã€‚
ã‚¢ãƒ—ãƒªå†…ã§å®Œå…¨ãªã‚«ãƒ¡ãƒ©ä½“é¨“ã‚’ä½œæˆã™ã‚‹ãŸã‚ã«å¿…è¦ãªã‚‚ã®ã§ã™ã€‚

```dart
CameraAwesomeBuilder.awesome(
  saveConfig: SaveConfig.photoAndVideo(),
  onMediaTap: (mediaCapture) {
    OpenFile.open(mediaCapture.filePath);
  },
),
```

![CamerAwesome default UI](docs/img/base_awesome_ui.jpg)

ã“ã®ãƒ“ãƒ«ãƒ€ãƒ¼ã¯æ§˜ã€…ãªè¨­å®šã§ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã§ãã‚‹ï¼š
- A theme.
- Builders for each part of the screen.
- Initial camera setup.
- Preview positioning.
- Additional preview decoration.
- And much more!

ä¾‹ã‚’æŒ™ã’ã‚ˆã†ï¼š

![Customized UI](docs/img/custom_awesome_ui.jpg)

---

## ğŸ¨ ã‚«ã‚¹ã‚¿ãƒ ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã®ä½œæˆ

If the `awesome()` factory is not enough, you can use `custom()` instead.

It provides a `builder` property that lets you create your own camera
experience. <br>

The camera preview will be visible behind what you will provide to the builder.

```dart
CameraAwesomeBuilder.custom(
  saveConfig: SaveConfig.photo(),
  builder: (state, previewSize, previewRect) {
    // create your interface here
  },
)
```



### ã‚«ã‚¹ã‚¿ãƒ ãƒ“ãƒ«ãƒ€ãƒ¼ã¨ã®å”åŠ›

Here is the definition of our builder method.

```dart
typedef CameraLayoutBuilder = Widget Function(CameraState cameraState, PreviewSize previewSize, Rect previewRect);
```

<br>
ã‚«ãƒ¡ãƒ©ã‚’ç®¡ç†ã§ãã‚‹ã®ã¯cameraStateã ã‘ã§ã™ã€‚<br>
ã©ã®å·ã§ã‚«ãƒ¡ãƒ©ã‚’ä½“é¨“ã™ã‚‹ã‹ã«ã‚ˆã£ã¦ã€ã„ãã¤ã‹ã®ç•°ãªã‚‹æ–¹æ³•ã‚’åˆ©ç”¨ã§ãã‚‹ã€‚<br>
previewSize`ã¨`previewRect`ã¯ã€ã‚«ãƒ¡ãƒ©ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ã®å‘¨ã‚Šã‚„ä¸Šã«UIã‚’é…ç½®ã™ã‚‹ãŸã‚ã«ä½¿ã‚ã‚Œã¾ã™ã€‚
<br>

#### CamerAwesomeã®ã‚¹ãƒ†ãƒ¼ãƒˆã¯ã©ã®ã‚ˆã†ã«æ©Ÿèƒ½ã™ã‚‹ã®ã§ã™ã‹ï¼Ÿ

ã“ã®çŠ¶æ…‹ã‚’ä½¿ãˆã°ã€ã‚«ãƒ¡ãƒ©ã®æµã‚Œã‚’è€ƒãˆã‚‹ã“ã¨ãªãã€å¿…è¦ãªã“ã¨ã¯ä½•ã§ã‚‚ã§ãã‚‹ã€‚<br><br>

- On app start we are in `PreparingCameraState`<br>
- Then depending on the initialCaptureMode you set you will be
  `PhotoCameraState` or `VideoCameraState`<br>
- Starting a video will push a `VideoRecordingCameraState`<br>
- Stopping the video will push back the `VideoCameraState`<br>
  <br> Also if you want to use some specific function you can use the when
  method so you can write like this.<br>

```dart
state.when(
  onPhotoMode: (photoState) => photoState.start(),
  onVideoMode: (videoState) => videoState.start(),
  onVideoRecordingMode: (videoState) => videoState.pause(),
);
```

<br>

---

## ğŸ å†™çœŸã‚„ãƒ“ãƒ‡ã‚ªã®ã‚¤ãƒ™ãƒ³ãƒˆã‚’è´ã

onMediaCaptureEventã‚’ä½¿ãˆã°ã€ã‚ã‚‰ã‚†ã‚‹ãƒ¡ãƒ‡ã‚£ã‚¢ãƒ»ã‚­ãƒ£ãƒ—ãƒãƒ£ãƒ»ã‚¤ãƒ™ãƒ³ãƒˆã‚’ãƒªãƒƒã‚¹ãƒ³ã—ã€ãã‚Œã‚’ä½¿ã£ã¦å¥½ããªã“ã¨ãŒã§ãã‚‹ã€‚
ã‚’ä½¿ã†ã“ã¨ãŒã§ãã‚‹ã€‚

```dart
onMediaCaptureEvent: (event) {
    switch ((event.status, event.isPicture, event.isVideo)) {
        case (MediaCaptureStatus.capturing, true, false):
            debugPrint('Capturing picture...');
        case (MediaCaptureStatus.success, true, false):
            event.captureRequest.when(
                single: (single) {
                debugPrint('Picture saved: ${single.file?.path}');
                },
                multiple: (multiple) {
                multiple.fileBySensor.forEach((key, value) {
                    debugPrint('multiple image taken: $key ${value?.path}');
                });
                },
            );
        case (MediaCaptureStatus.failure, true, false):
            debugPrint('Failed to capture picture: ${event.exception}');
        case (MediaCaptureStatus.capturing, false, true):
            debugPrint('Capturing video...');
        case (MediaCaptureStatus.success, false, true):
            event.captureRequest.when(
                single: (single) {
                    debugPrint('Video saved: ${single.file?.path}');
                },
                multiple: (multiple) {
                    multiple.fileBySensor.forEach((key, value) {
                        debugPrint('multiple video taken: $key ${value?.path}');
                    });
                },
            );
        case (MediaCaptureStatus.failure, false, true):
            debugPrint('Failed to capture video: ${event.exception}');
        default:
            debugPrint('Unknown event: $event');
    }
},
```

---

## ğŸ”¬ è§£æãƒ¢ãƒ¼ãƒ‰

ã“ã‚Œã‚’åˆ©ç”¨ã—ã¦é”æˆã—ã‚ˆã†ï¼š

- QR-Code scanning.
- Facial recognition.
- AI object detection.
- Realtime video chats.
- And much more ğŸ¤©

![Face AI](docs/img/face_ai.gif)

`ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã§MLKitã‚’ä½¿ã£ãŸã‚µãƒ³ãƒ—ãƒ«ã‚’ç¢ºèªã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚ä¸Šã®
ai_analysis_faces.dart`ã®ä¾‹ã§ã‚ã‚‹ã€‚ã“ã‚Œã¯é¡”ã‚’æ¤œå‡ºã—
è¼ªéƒ­ã‚’æç”»ã™ã‚‹ã€‚

MLKitã‚’ä½¿ã£ã¦ãƒãƒ¼ã‚³ãƒ¼ãƒ‰ã‚’èª­ã¿å–ã‚‹ã“ã¨ã‚‚å¯èƒ½ã ï¼š

![Barcode scanning](docs/img/barcode_overlay.gif)


### ä½¿ç”¨æ–¹æ³•

```dart
CameraAwesomeBuilder.awesome(
  saveConfig: SaveConfig.photo(),
  onImageForAnalysis: analyzeImage,
  imageAnalysisConfig: AnalysisConfig(
        // Android specific options
        androidOptions: const AndroidAnalysisOptions.nv21(
            // Target width (CameraX will chose the closest resolution to this width)
            width: 250,
        ),
        // Wether to start automatically the analysis (true by default)
        autoStart: true,
        // Max frames per second, null for no limit (default)
        maxFramesPerSecond: 20,
    ),
)
```




âš ï¸ On Android, some devices don't support video recording and image analysis at
the same time.

- If they don't, image analysis will be ignored.
- You can check if a device has this capability by using
  `CameraCharacteristics .isVideoRecordingAndImageAnalysisSupported(Sensors.back)`.

---

## ğŸ½ ã‚»ãƒ³ã‚µãƒ¼è¨­å®šã®æ›´æ–°

Through state you can access to a `SensorConfig` class.

<br>

| Function               | Comment                                                    |
| ---------------------- | ---------------------------------------------------------- |
| `setZoom`              | change zoom                                                |
| `setFlashMode`         | change flash between NONE,ON,AUTO,ALWAYS                   |
| `setBrightness`        | change brightness level manually (better to let this auto) |
| `setMirrorFrontCamera` | set mirroring for front camera                             |

ã“ã‚Œã‚‰ã®ã‚³ãƒ³ãƒ•ã‚£ã‚®ãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã¯ã™ã¹ã¦ã€ã‚¹ãƒˆãƒªãƒ¼ãƒ ã‚’é€šã—ã¦ãƒªãƒƒã‚¹ãƒ³å¯èƒ½ã§ã‚ã‚‹ã€‚
ã¯å®Ÿéš›ã®ã‚³ãƒ³ãƒ•ã‚£ã‚®ãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã«å¾“ã£ã¦è‡ªå‹•çš„ã«æ›´æ–°ã•ã‚Œã‚‹ã€‚

<br>

## ğŸŒ† ãƒ•ã‚©ãƒˆãƒ©ã‚¤ãƒ–ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼

å†…è”µã®ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ã‚¤ã‚¹ã‚’ä½¿ç”¨ã—ã¦ã€å†™çœŸã«ãƒ©ã‚¤ãƒ–ãƒ•ã‚£ãƒ«ã‚¿ã‚’é©ç”¨ã—ã¾ã™ï¼š

![Built-in live filters](docs/img/filters.gif)

ã¾ãŸã€æœ€åˆã‹ã‚‰ç‰¹å®šã®ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ã‚’ä½¿ã†ã“ã¨ã‚‚ã§ãã‚‹ï¼š


```dart
CameraAwesomeBuilder.awesome(
  // other params
  filter: AwesomeFilter.AddictiveRed,
  availableFilters: ...
)
```

ã¾ãŸã¯ã€ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã§ãƒ•ã‚£ãƒ«ã‚¿ã‚’è¨­å®šã™ã‚‹ï¼š

```dart
CameraAwesomeBuilder.custom(
  builder: (cameraState, previewSize, previewRect) {
    return cameraState.when(
      onPreparingCamera: (state) =>
      const Center(child: CircularProgressIndicator()),
      onPhotoMode: (state) =>
          TakePhotoUI(state, onFilterTap: () {
            state.setFilter(AwesomeFilter.Sierra);
          }),
      onVideoMode: (state) => RecordVideoUI(state, recording: false),
      onVideoRecordingMode: (state) =>
          RecordVideoUI(state, recording: true),
    );
  },
)
```

> [!TIP] By default the awesome ui setup has a filter list but you can pass an
> empty list to remove it

## ğŸ“· ğŸ“· ã‚³ãƒ³ã‚«ãƒ¬ãƒ³ãƒˆã‚«ãƒ¡ãƒ©

![Concurrent cameras](docs/img/concurrent_cameras.gif)

> ğŸš§ Feature in beta ğŸš§ Any feedback is welcome!



```dart
CameraAwesomeBuilder.awesome(
    sensorConfig: SensorConfig.multiple(
        sensors: [
            Sensor.position(SensorPosition.back),
            Sensor.position(SensorPosition.front),
        ],
        flashMode: FlashMode.auto,
        aspectRatio: CameraAspectRatios.ratio_16_9,
    ),
    // Other params
)
```


<br>

<a href="">
  <img
    src="https://firebasestorage.googleapis.com/v0/b/unprocessedsns.firebasestorage.app/o/photo_2025-02-24_04-15-41.jpg?alt=media&token=1514af97-3d35-4cff-ac27-d84095441241"
    width="100%"
  />
</a>

